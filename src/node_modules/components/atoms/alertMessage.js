import React from "react";

const getMessages = (error) => {
  /*
   * in different cases form can get different structure of error
   * - wrong filled email only
   * - wrong filled password only
   * - email is not unique (eg email:asd@asd.asd, password:asdasd)
   * in other cases message is 'Unexpected error'
   */

  if (Array.isArray(error.error)) {
    return error.error
      .map((val) => {
        return val.message;
      })
      .join(" ");
  }
  if (error.error && error.error.message) {
    return error.error.message;
  }
  if (typeof error.error === "string") {
    return error.error;
  }
  return "Unexpected error";
};

const AlertMessage = ({ error }) => {
  return (
    <div>
      <div className="alert alert-danger" role="alert">
        {getMessages(error)}
      </div>
    </div>
  );
};

export default AlertMessage;
